function toggleSidebar(){let e=document.querySelector(".sidebar");e.classList.toggle("active")}function closeSidebar(){let e=document.querySelector(".sidebar");e.classList.remove("active")}function handleClickOutside(e){let t=document.querySelector(".sidebar"),l=document.querySelector(".menu-btn");t.contains(e.target)||l.contains(e.target)||closeSidebar()}document.addEventListener("click",handleClickOutside),window.addEventListener("resize",function(){let e=document.querySelector(".sidebar");window.innerWidth>=768&&e.classList.remove("active")});const tree_container=document.querySelector(".tree");function tree_auto_scroll(){tree_container.scrollLeft=tree_container.scrollWidth}function setLoadingFilePercentage(e,t){e.style.background="linear-gradient(to right, var(--accent-green-transparent) 100%, transparent 0%)",e.style.backgroundSize=`${t}% 100%`,e.style.backgroundPosition="left"}function setLoadingFileComplete(e){e.style.transition="background-size 0.3s ease, background-position 0.3s ease",e.style.backgroundSize="100% 0%",e.style.backgroundPosition="right",setTimeout(()=>{e&&(e.style.transition="background-color 0.5s ease",e.style.background="var(--transparent-blue)")},300)}tree_auto_scroll(),tree_container.addEventListener("scroll",function(){tree_auto_scroll()});const files=document.querySelector(".files");function multipleSelected(){let e=document.querySelectorAll(".files .file-container[selected]");return e.length>=2}function createOverlay(e){let t=e.cloneNode(!0),l=e.querySelector(".file-info").cloneNode(!0);return t.innerHTML="",t.appendChild(l),t}function createOverlayContainer(e){let t=document.createElement("div");return t.style.position="absolute",t.style.top="-9999px",t.appendChild(e),document.body.appendChild(t),t}function createSecondOverlay(e){let t=e.cloneNode(!0),l=window.getComputedStyle(e);return t.style.position="absolute",t.style.top="15px",t.style.left="15px",t.style.opacity="0.8",t.style.width=l.width,t.style.height=l.height,t.innerHTML="",t}function toggleSelected(e,t){t?e.setAttribute("selected",""):e.removeAttribute("selected")}function deselectAll(){let e=document.querySelectorAll(".file-container");e.forEach(e=>{toggleSelected(e,!1)})}function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}files.addEventListener("mouseenter",e=>{if(e.target.classList.contains("file-info")){let t=e.target.closest(".file-container");t.style.backgroundColor="var(--accent-green-transparent)"}},!0),files.addEventListener("mouseleave",e=>{if(e.target.classList.contains("file-info")){let t=e.target.closest(".file-container");t.style.backgroundColor="var(--bg-light)"}},!0),files.addEventListener("dragstart",e=>{if(!e.target.classList.contains("file-container"))return;toggleSelected(e.target,!0);let t=createOverlay(e.target),l=createOverlayContainer(t);if(multipleSelected()){let a=createSecondOverlay(t);l.appendChild(a)}e.dataTransfer.setDragImage(l,0,0),setTimeout(()=>{document.body.removeChild(l)},0)}),document.body.addEventListener("click",function(e){let t=e.target.closest(".file-container");t||e.shiftKey||e.ctrlKey||deselectAll()});const MD_LANGUAGES=[{lang:"abap",ext:["abap"]},{lang:"actionscript",ext:["as"]},{lang:"ada",ext:["adb","ads"]},{lang:"angelscript",ext:["as"]},{lang:"apache",ext:["conf"]},{lang:"applescript",ext:["applescript"]},{lang:"arcade",ext:["arcade"]},{lang:"asciidoc",ext:["adoc","asciidoc"]},{lang:"aspectj",ext:["aj"]},{lang:"autohotkey",ext:["ahk"]},{lang:"autoit",ext:["au3"]},{lang:"awk",ext:["awk"]},{lang:"bash",ext:["sh","bash","zsh"]},{lang:"basic",ext:["bas"]},{lang:"bnf",ext:["bnf"]},{lang:"brainfuck",ext:["b","bf"]},{lang:"csharp",ext:["cs"]},{lang:"cpp",ext:["cpp","cxx","hpp","h"]},{lang:"c",ext:["c","h"]},{lang:"cmake",ext:["cmake"]},{lang:"coffeescript",ext:["coffee"]},{lang:"crystal",ext:["cr"]},{lang:"css",ext:["css"]},{lang:"d",ext:["d"]},{lang:"dart",ext:["dart"]},{lang:"delphi",ext:["pas","dpr"]},{lang:"diff",ext:["diff","patch"]},{lang:"django",ext:["html","jinja"]},{lang:"dockerfile",ext:["Dockerfile","dockerfile"],name:["Dockerfile","dockerfile"]},{lang:"ebnf",ext:["ebnf"]},{lang:"elixir",ext:["ex","exs"]},{lang:"elm",ext:["elm"]},{lang:"erlang",ext:["erl"]},{lang:"fortran",ext:["f90","f95","for"]},{lang:"fsharp",ext:["fs","fsi","fsx"]},{lang:"gcode",ext:["gcode"]},{lang:"gherkin",ext:["feature"]},{lang:"glsl",ext:["glsl","vert","frag"]},{lang:"go",ext:["go"]},{lang:"graphql",ext:["graphql","gql"]},{lang:"groovy",ext:["groovy"]},{lang:"haml",ext:["haml"]},{lang:"handlebars",ext:["hbs","handlebars"]},{lang:"haskell",ext:["hs"]},{lang:"haxe",ext:["hx"]},{lang:"html",ext:["html","htm"]},{lang:"http",ext:["http"]},{lang:"ini",ext:["ini","toml"]},{lang:"java",ext:["java","jsp"]},{lang:"javascript",ext:["js","jsx"]},{lang:"json",ext:["json"]},{lang:"julia",ext:["jl"]},{lang:"kotlin",ext:["kt","kts"]},{lang:"latex",ext:["tex"]},{lang:"less",ext:["less"]},{lang:"lisp",ext:["lisp","cl"]},{lang:"lua",ext:["lua"]},{lang:"makefile",ext:["Makefile"]},{lang:"markdown",ext:["md","markdown"]},{lang:"matlab",ext:["m"]},{lang:"mipsasm",ext:["asm","s"]},{lang:"nginx",ext:["nginxconf"]},{lang:"nim",ext:["nim"]},{lang:"objectivec",ext:["m","mm"]},{lang:"ocaml",ext:["ml"]},{lang:"perl",ext:["pl","pm"]},{lang:"php",ext:["php"]},{lang:"plaintext",ext:["txt"]},{lang:"powershell",ext:["ps1"]},{lang:"protobuf",ext:["proto"]},{lang:"python",ext:["py"]},{lang:"r",ext:["r"]},{lang:"ruby",ext:["rb"]},{lang:"rust",ext:["rs"]},{lang:"scala",ext:["scala"]},{lang:"scheme",ext:["scm"]},{lang:"scss",ext:["scss"]},{lang:"shell",ext:["sh"]},{lang:"sql",ext:["sql"]},{lang:"swift",ext:["swift"]},{lang:"typescript",ext:["ts","tsx"]},{lang:"vbnet",ext:["vb"]},{lang:"vhdl",ext:["vhd","vhdl"]},{lang:"xml",ext:["xml"]},{lang:"yaml",ext:["yml","yaml"]},],MAX_TEXT_FILE_SIZE=1048576,MAX_IMAGE_FILE_SIZE=52428800,MAX_PDF_FILE_SIZE=524288e3;function getLanguageByExtension(e,t){for(let l of MD_LANGUAGES)if(l.ext?.includes(e)||l.name&&l.name.includes(t))return l.lang;return null}function handleFileOpenExtension(e,t,l,a,n){let r="",i=!1,s=null;switch(t){case"md":if(l>1048576)return;r=" y w";break;case"txt":case"gitignore":if(l>1048576)return;r=" x y nw";break;case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"svg":case"webp":case"ico":if(l>52428800)return;r=" y";break;case"pdf":if(l>524288e3)return;break;default:if(s=getLanguageByExtension(t,n)){if(l>1048576)return;r=" x y nw cdbg",i="nx";break}return}let c=async()=>{let e=document.getElementById("view-file-content");e.className="view-modal-element scrollable"+r,getFileViewElement(t,s,a,e);let l=document.getElementById("view-file-modal"),c=document.getElementById("view-file-title"),o=document.getElementById("view-file-close");if(c.innerHTML=n,i){let g=e.querySelectorAll("code");g.forEach(e=>{e.classList.add(i)})}l.onclick=e=>{e.target===l&&(toggleLinkAttribute("modalOpen",!1),l.style.display="none")},o.onclick=()=>{toggleLinkAttribute("modalOpen",!1),l.style.display="none"},toggleLinkAttribute("modalOpen",!0),l.style.display="flex"};return c}async function fetchText(e){let t=await fetch(e);return 200!==t.status&&(alert("Errore durante la richiesta"),window.location.reload()),await t.text()}function getFileViewElement(e,t,l,a){let n=(e,l,n)=>{l.style.display="none",a.innerHTML=DOMPurify.sanitize(t?marked.parse(`\`\`\`${t}
${e}
\`\`\``):n?marked.parse(e):e.replace(/\n/g,"<br/>")),hljs.highlightAll()},r=(e,t,l)=>new Promise((a,r)=>{fetchText(e).then(e=>n(e,t,l)).then(()=>{a()}).catch(e=>{alert("Errore durante il caricamento del file."),window.location.reload(),r(e)})}),i=(()=>{let e=document.createElement("div"),t=document.createElement("div");return t.className="loading-icon",e.className="loading-container",e.appendChild(t),e})();a.innerHTML="",a.appendChild(i);let s=`/download?filepath=${encodeURIComponent(l)}`;if(t){r(s,i,!1);return}switch(e){case"md":r(s,i,!0);return;case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"svg":case"webp":case"ico":let c=document.createElement("img");c.src=s,c.className="view-image",c.style.display="none",c.onload=()=>{i.style.display="none",c.style.display="block"},c.onerror=()=>{i.style.display="none",a.innerText="Errore nel caricamento dell'immagine."},a.appendChild(c);return;case"pdf":let o=document.createElement("iframe");o.src=`${s}&pdf=true`,o.className="view-pdf",o.style.display="none",o.onload=()=>{i.style.display="none",o.style.display="block"},o.onerror=()=>{i.style.display="none",a.innerText="Errore durante il caricamento del file PDF."},a.appendChild(o);return;default:r(s,i,!1);return}}